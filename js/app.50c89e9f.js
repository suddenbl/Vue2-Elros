(function(){"use strict";var t={5455:function(t,n,e){e.d(n,{A:function(){return u}});var o=function(){var t=this,n=t._self._c;return n("button",{staticClass:"button"},[t._v(t._s(t.textLabel))])},i=[],a={props:{textLabel:{type:String,required:!0}}},r=a,s=e(1656),c=(0,s.A)(r,o,i,!1,null,"07e2768f",null),u=c.exports},7846:function(t,n,e){var o=e(6848),i=e(9005),a=e(7754),r=function(){var t=this,n=t._self._c;return n("main",[n("div",{staticClass:"container"},[n("router-view")],1)])},s=[],c={name:"App",metaInfo:{title:"Vue-Elros",lang:"ru"}},u=c,l=e(1656),g=(0,l.A)(u,r,s,!1,null,"467267ff",null),d=g.exports,f=e(6178),p=function(){var t=this,n=t._self._c;return n("div",[n("h1",{staticClass:"title"},[t._v("Список организаций")]),n("router-link",{staticClass:"router-link",attrs:{to:"/CreateOrg"}},[n("TButton",{attrs:{textLabel:"+ Добавить организацию"}})],1),n("div",{staticClass:"main-table"},[n("OrganizationTable")],1)],1)},h=[],v=e(3640),z=function(){var t=this,n=t._self._c;return n("div",{staticClass:"table-container"},[n("h4",{staticClass:"table-description"},[t._v(" Доступна сортировка. Для этого действия нажмите на именования столбцов. ")]),n("div",{staticClass:"table-bar"},[n("div",{staticClass:"col id-col"},[n("p",{staticClass:"id-col-name",on:{click:function(n){return t.changeSort("id")}}},[t._v(" ID "),n("img",{class:{"id-col-img":!0,rotated:"+"===t.organizationStore.sortOrder},attrs:{src:e(3342),alt:"arrow"}})])]),n("div",{staticClass:"col name-col",on:{click:function(n){return t.changeSort("name")}}},[t._v("Наименование")]),n("div",{staticClass:"col active-col",on:{click:function(n){return t.changeSort("is_active")}}},[t._v("Активен")]),n("div",{staticClass:"col delete-col"},[t._v("Удаление")])]),!1===t.organizationStore.loading?n("div",{staticClass:"table-content"},t._l(t.organizationStore.organizations,(function(t){return n("OrganizationCard",{key:t.id,attrs:{org:t}})})),1):n("div",{staticClass:"loading-content"},[t._v("Идет загрузка...")]),n("div",{staticClass:"pagination"},[n("p",[t._v("Количество на странице")]),n("input",{staticClass:"pagination-size",attrs:{type:"number",min:"1",max:t.organizationStore.count},domProps:{value:t.organizationStore.pageSize},on:{change:function(n){t.changePagesSize(Number(n.target.value))}}}),n("p",[t._v(" "+t._s((this.organizationStore.pageCurrent-1)*this.organizationStore.pageSize+1)+" - "+t._s(Math.min(this.organizationStore.pageCurrent*this.organizationStore.pageSize,t.organizationStore.count))+" из "+t._s(t.organizationStore.count)+" ")]),n("div",{staticClass:"pagination-buttons-block"},[n("button",{staticClass:"pagination-button",on:{click:function(n){return t.paginationFirstPage()}}},[t._v(" "+t._s("|<")+" ")]),n("button",{staticClass:"pagination-button",on:{click:function(n){return t.paginationPrevPage()}}},[t._v(" "+t._s("<")+" ")]),n("button",{staticClass:"pagination-button",on:{click:function(n){return t.paginationNextPage()}}},[t._v(" "+t._s(">")+" ")]),n("button",{staticClass:"pagination-button",on:{click:function(n){return t.paginationLastPage()}}},[t._v(" "+t._s(">|")+" ")])])])])},m=[],C=function(){var t=this,n=t._self._c;return n("div",{staticClass:"organization-row"},[n("div",{staticClass:"id-col"},[t._v(t._s(t.org.id))]),n("div",{staticClass:"name-col"},[t._v(t._s(t.org.name))]),t.org.is_active?n("div",{staticClass:"active-col"},[n("button",{staticClass:"active-toggle green"},[t._v("Да")])]):n("div",{staticClass:"active-col red"},[n("button",{staticClass:"active-toggle red"},[t._v("Нет")])]),n("div",{staticClass:"delete-col"},[n("button",{on:{click:function(n){return t.deleteOrganization(t.org.id)}}},[n("img",{staticClass:"delete-col-img",attrs:{src:e(154),alt:"Delete"}})])])])},S=[],b={props:{org:{type:Object,required:!0}},data(){return{organizationStore:null}},created(){this.organizationStore=(0,v.E)()},methods:{deleteOrganization(t){this.organizationStore.deleteOrganization(t)}}},_=b,y=(0,l.A)(_,C,S,!1,null,"28dece8e",null),O=y.exports,k={components:{OrganizationCard:O},data(){return{organizationStore:null}},created(){this.organizationStore=(0,v.E)()},methods:{paginationFirstPage(){this.organizationStore.setPage(this.organizationStore.pageCurrent=1),this.organizationStore.getOrganizations()},paginationLastPage(){this.organizationStore.setPage(this.organizationStore.pageCurrent=this.organizationStore.pagesCount),this.organizationStore.getOrganizations()},paginationNextPage(){this.organizationStore.pageCurrent<this.organizationStore.pagesCount&&(this.organizationStore.setPage(this.organizationStore.pageCurrent+1),this.organizationStore.getOrganizations())},paginationPrevPage(){this.organizationStore.pageCurrent>1&&this.organizationStore.setPage(this.organizationStore.pageCurrent-1),this.organizationStore.getOrganizations()},changePagesSize(t){this.organizationStore.setPageSize(t)},changeSort(t){this.organizationStore.setSort(t),this.organizationStore.getOrganizations()}}},A=k,P=(0,l.A)(A,z,m,!1,null,"4757bd94",null),w=P.exports,x=e(5455),E={components:{OrganizationTable:w,TButton:x.A},data(){return{organizationsStore:null}},mounted(){this.getOrganizations()},created(){this.organizationsStore=(0,v.E)()},methods:{getOrganizations(){this.organizationsStore.getOrganizations()}}},N=E,j=(0,l.A)(N,p,h,!1,null,null,null),T=j.exports;o.Ay.use(f.A);const L=[{path:"/",component:T},{path:"/CreateOrg",component:()=>e.e(389).then(e.bind(e,8389))}];var B=new f.A({mode:"history",routes:L});const F=(0,i.Ey)();o.Ay.use(F),o.Ay.use(a.A),new o.Ay({router:B,render:t=>t(d)}).$mount("#app")},3640:function(t,n,e){e.d(n,{E:function(){return a}});var o=e(9005),i=e(8355);const a=(0,o.nY)("organizationStore",{state:()=>({loading:!1,organizations:[],sortOrder:"-",sortName:"",pagesCount:0,pageSize:5,pageCurrent:1,count:0}),actions:{setCount(t){this.count=t,this.pagesCount=Math.ceil(t/this.pageSize)},setOrganizations(t){this.organizations=t},setPage(t){this.pageCurrent=t},setPageSize(t){this.pageSize=t,this.pagesCount=Math.ceil(this.count/t),this.getOrganizations()},setSort(t){this.sortName=t,"-"===this.sortOrder?this.sortOrder="+":this.sortOrder="-"},async getOrganizations(){try{const t=await i.A.get(`https://developer3.elros.info/api/v1/organizations/?page=${this.pageCurrent}&page_size=${this.pageSize}&ordering=${this.sortOrder}${this.sortName}`);this.setCount(t.data.count),this.setOrganizations(t.data.results),console.log("Получение данных прошло успешно!",t)}catch(t){console.log("Произошла ошибка при получении данных: ",t)}},async createOrganization(t,n,e,o){try{const a=await i.A.post("https://developer3.elros.info/api/v1/organizations/",{name:t,short_name:n,description:e,is_active:o});console.log("Добавление прошло успешно!",a)}catch(a){console.log("Произошла ошибка при добавлении организациию: ",a)}},async deleteOrganization(t){try{const n=await i.A.delete(`https://developer3.elros.info/api/v1/organizations/${t}`);204===n.status&&(this.organizations=this.organizations.filter((n=>n.id!==t)),console.log("Удаление организации прошло успешно!")),console.log("Удаление прошло успешно!",n)}catch(n){console.log("Произошла ошибка при удалении организации:",n)}}}})},3342:function(t,n,e){t.exports=e.p+"img/arrow.5a691a0d.svg"},154:function(t,n,e){t.exports=e.p+"img/delete.e8128858.svg"}},n={};function e(o){var i=n[o];if(void 0!==i)return i.exports;var a=n[o]={exports:{}};return t[o].call(a.exports,a,a.exports,e),a.exports}e.m=t,function(){var t=[];e.O=function(n,o,i,a){if(!o){var r=1/0;for(l=0;l<t.length;l++){o=t[l][0],i=t[l][1],a=t[l][2];for(var s=!0,c=0;c<o.length;c++)(!1&a||r>=a)&&Object.keys(e.O).every((function(t){return e.O[t](o[c])}))?o.splice(c--,1):(s=!1,a<r&&(r=a));if(s){t.splice(l--,1);var u=i();void 0!==u&&(n=u)}}return n}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[o,i,a]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})}}(),function(){e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(n,o){return e.f[o](t,n),n}),[]))}}(),function(){e.u=function(t){return"js/"+t+".a46d83f7.js"}}(),function(){e.miniCssF=function(t){return"css/"+t+".15eee521.css"}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){var t={},n="vue-elros:";e.l=function(o,i,a,r){if(t[o])t[o].push(i);else{var s,c;if(void 0!==a)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var g=u[l];if(g.getAttribute("src")==o||g.getAttribute("data-webpack")==n+a){s=g;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,e.nc&&s.setAttribute("nonce",e.nc),s.setAttribute("data-webpack",n+a),s.src=o),t[o]=[i];var d=function(n,e){s.onerror=s.onload=null,clearTimeout(f);var i=t[o];if(delete t[o],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(t){return t(e)})),n)return n(e)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){e.p=""}(),function(){if("undefined"!==typeof document){var t=function(t,n,o,i,a){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",e.nc&&(r.nonce=e.nc);var s=function(e){if(r.onerror=r.onload=null,"load"===e.type)i();else{var o=e&&e.type,s=e&&e.target&&e.target.href||n,c=new Error("Loading CSS chunk "+t+" failed.\n("+o+": "+s+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=s,r.parentNode&&r.parentNode.removeChild(r),a(c)}};return r.onerror=r.onload=s,r.href=n,o?o.parentNode.insertBefore(r,o.nextSibling):document.head.appendChild(r),r},n=function(t,n){for(var e=document.getElementsByTagName("link"),o=0;o<e.length;o++){var i=e[o],a=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(a===t||a===n))return i}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){i=r[o],a=i.getAttribute("data-href");if(a===t||a===n)return i}},o=function(o){return new Promise((function(i,a){var r=e.miniCssF(o),s=e.p+r;if(n(r,s))return i();t(o,s,null,i,a)}))},i={524:0};e.f.miniCss=function(t,n){var e={389:1};i[t]?n.push(i[t]):0!==i[t]&&e[t]&&n.push(i[t]=o(t).then((function(){i[t]=0}),(function(n){throw delete i[t],n})))}}}(),function(){var t={524:0};e.f.j=function(n,o){var i=e.o(t,n)?t[n]:void 0;if(0!==i)if(i)o.push(i[2]);else{var a=new Promise((function(e,o){i=t[n]=[e,o]}));o.push(i[2]=a);var r=e.p+e.u(n),s=new Error,c=function(o){if(e.o(t,n)&&(i=t[n],0!==i&&(t[n]=void 0),i)){var a=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;s.message="Loading chunk "+n+" failed.\n("+a+": "+r+")",s.name="ChunkLoadError",s.type=a,s.request=r,i[1](s)}};e.l(r,c,"chunk-"+n,n)}},e.O.j=function(n){return 0===t[n]};var n=function(n,o){var i,a,r=o[0],s=o[1],c=o[2],u=0;if(r.some((function(n){return 0!==t[n]}))){for(i in s)e.o(s,i)&&(e.m[i]=s[i]);if(c)var l=c(e)}for(n&&n(o);u<r.length;u++)a=r[u],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(l)},o=self["webpackChunkvue_elros"]=self["webpackChunkvue_elros"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=e.O(void 0,[504],(function(){return e(7846)}));o=e.O(o)})();
//# sourceMappingURL=app.50c89e9f.js.map